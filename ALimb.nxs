{"type":"group","name":"alimb","enabled":true,"items":[{"type":"function","name":"onInstall","enabled":true,"code":"// Place any code here you'd like to autorun when the package is installed\nalimb = {};\n\nif (!nexusclient.ui().layout().tab_location('LimbTracker')) {\n  nexusclient.ui().layout().register_custom_tab('LimbTracker');\n}"},{"type":"function","name":"onUninstall","enabled":true,"code":"// Place any code here you'd like to autorun when the package is uninstalled"},{"type":"function","name":"onLoad","enabled":true,"code":"alimb = {};\n\nif (!nexusclient.ui().layout().tab_location('LimbTracker')) {\n  nexusclient.ui().layout().register_custom_tab('LimbTracker');\n}"},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nconst target = args[1];\nconst amount = Number(args[2]) + (Number(args[3]) / 10);\nconst limb = args[4];\n\nif(typeof alimb[target] != \"undefined\") {\n  clearTimeout(alimb[target].timers[limb]);\n  alimb[target].limbs[limb] += amount;\n  send_command(\"updatetab\");\n  alimb[target].timers[limb] = setTimeout(function() {\n    alimb[target].limbs[limb] = 0;\n    display_notice(\"[ALIMB] \", \"yellow\", \"\", target + \"'s \" + limb + \" CLEARED\", \"orange\", \"\");\n    send_command(\"updatetab\");\n  }, 180000)\n} else {\n  let entry = {\n    limbs: {\n      head:0,\n      'left arm':0,\n      'right arm':0,\n      torso:0,\n      'left leg':0,\n      'right leg':0\n    },\n    timers: {\n      head:0,\n      'left arm':0,\n      'right arm':0,\n      torso:0,\n      'left leg':0,\n      'right leg':0\n    }\n  }\n  alimb[target] = entry;\n  alimb[target].limbs[limb] = amount;\n  send_command(\"updatetab\");\n  alimb[target].timers[limb] = setTimeout(function() {\n    alimb[target].limbs[limb] = 0;\n    display_notice(\"[ALIMB] \", \"yellow\", \"\", target + \"'s \" + limb + \" CLEARED\", \"orange\");\n    send_command(\"updatetab\");\n  }, 180000)\n}"}],"text":"^As you carve into (\\w+), you perceive that you have dealt (\\d+).(\\d+)% damage to (?:\\w+)? (.+).$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nlet str = \"ALimb</br>\";\nstr += \"Target: \" + GMCP.Target.id + \"</br></br>\";\nstr += `Head: ${alimb[GMCP.Target.id].limbs['head']}%</br>`;\nstr += `Left Arm: ${alimb[GMCP.Target.id].limbs['left arm']}%</br>`;\nstr += `Right Arm: ${alimb[GMCP.Target.id].limbs['right arm']}%</br>`;\nstr += `Torso: ${alimb[GMCP.Target.id].limbs['torso']}%</br>`;\nstr += `Left Leg: ${alimb[GMCP.Target.id].limbs['left leg']}%</br>`;\nstr += `Right Leg: ${alimb[GMCP.Target.id].limbs['right leg']}%</br>`;\n\nset_custom_tab_html(\"LimbTracker\", str);"}],"text":"updatetab","matching":"begins","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\n//Enter the script here\nconst target = args[3];\nconst amount = Number(args[1]) + (Number(args[2]) / 10);\nconst limb = args[4];\n\nif(typeof alimb[target] != \"undefined\") {\n  clearTimeout(alimb[target].timers[limb]);\n  alimb[target].limbs[limb] += amount;\n  send_command(\"updatetab\");\n  alimb[target].timers[limb] = setTimeout(function() {\n    alimb[target].limbs[limb] = 0;\n    display_notice(\"[ALIMB] \", \"yellow\", \"\", target + \"'s \" + limb + \" CLEARED\", \"orange\", \"\");\n    send_command(\"updatetab\");\n  }, 180000)\n} else {\n  let entry = {\n    limbs: {\n      head:0,\n      'left arm':0,\n      'right arm':0,\n      torso:0,\n      'left leg':0,\n      'right leg':0\n    },\n    timers: {\n      head:0,\n      'left arm':0,\n      'right arm':0,\n      torso:0,\n      'left leg':0,\n      'right leg':0\n    }\n  }\n  alimb[target] = entry;\n  alimb[target].limbs[limb] = amount;\n  send_command(\"updatetab\");\n  alimb[target].timers[limb] = setTimeout(function() {\n    alimb[target].limbs[limb] = 0;\n    display_notice(\"[ALIMB] \", \"yellow\", \"\", target + \"'s \" + limb + \" CLEARED\", \"orange\");\n    send_command(\"updatetab\");\n  }, 180000)\n}"}],"text":"As your blow lands with a crunch, you perceive that you have dealt (\\d+).(\\d+)% damage to (\\w+)'s (.+).","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"function","name":"onGMCP","enabled":true,"code":"if(args.gmcp_method == \"IRE.Target.Set\") {\n  let str = \"ALimb</br>\";\n  if (GMCP.TargetIsPlayer) {\n    str += \"Target: \" + GMCP.Target.id + \"</br></br>\";\n    str += `Head: ${alimb[GMCP.Target.id].limbs['head']}%</br>`;\n    str += `Left Arm: ${alimb[GMCP.Target.id].limbs['left arm']}%</br>`;\n    str += `Right Arm: ${alimb[GMCP.Target.id].limbs['right arm']}%</br>`;\n    str += `Torso: ${alimb[GMCP.Target.id].limbs['torso']}%</br>`;\n    str += `Left Leg: ${alimb[GMCP.Target.id].limbs['left leg']}%</br>`;\n    str += `Right Leg: ${alimb[GMCP.Target.id].limbs['right leg']}%</br>`;\n  } else {\n    str += \"TARGET IS NOT A PLAYER!\";\n  }\n  set_custom_tab_html(\"LimbTracker\", str);\n}"},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nlet str = \"Target: \" + GMCP.Target.id + \"</br></br>\";\nstr += `Head: ${alimb[GMCP.Target.id].limbs['head']}%</br>`;\nstr += `Left Arm: ${alimb[GMCP.Target.id].limbs['left arm']}%</br>`;\nstr += `Right Arm: ${alimb[GMCP.Target.id].limbs['right arm']}%</br>`;\nstr += `Torso: ${alimb[GMCP.Target.id].limbs['torso']}%</br>`;\nstr += `Left Leg: ${alimb[GMCP.Target.id].limbs['left leg']}%</br>`;\nstr += `Right Leg: ${alimb[GMCP.Target.id].limbs['right leg']}%</br>`;\n\nset_custom_tab_html(\"LimbTracker\", str);"}],"text":"Your target is now: (\\w+) \\(an adventurer\\)","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nconst target = args[1];\nconst limb = args[2];\n\nsetTimeout(function() {\n  if (limb == \"head\") {\n    alimb[target].limbs.head = alimb[target].limbs.head - (alimb[target].limbs.head % 100) - 100;\n  } else if (limb == \"torso\") {\n    alimb[target].limbs.torso = alimb[target].limbs.torso - (alimb[target].limbs.torso % 100) - 100;\n  } else if (limb == \"legs\") {\n    if (alimb[target].limbs['left leg'] > 0) {\n      alimb[target].limbs['left leg'] = alimb[target].limbs['left leg'] - (alimb[target].limbs['left leg'] % 100) - 100;\n    } else if (alimb[target].limbs['right leg'] > 0) {\n      alimb[target].limbs['right leg'] = alimb[target].limbs['right leg'] - (alimb[target].limbs['right leg'] % 100) - 100;\n    }\n  } else if (limb == \"arms\") {\n    if (alimb[target].limbs['left arm'] > 0) {\n      alimb[target].limbs['left arm'] = alimb[target].limbs['left arm'] - (alimb[target].limbs['left arm'] % 100) - 100;\n    } else if (alimb[target].limbs['right arm'] > 0) {\n      alimb[target].limbs['right arm'] = alimb[target].limbs['right arm'] - (alimb[target].limbs['right arm'] % 100) - 100;\n    }\n  }\n  display_notice(\"[ALIMB] \", \"yellow\", \"\", target + \" applied salve to \" + limb + \"!\", \"orange\");\n\n  send_command(\"updatetab\");\n}, 4000)"}],"text":"^(\\w+?) takes some salve from a vial and rubs it on \\w+ (head|torso|arms|legs)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true}],"description":"Argwin's Nexus3 Limb Tracker"}